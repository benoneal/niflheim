Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e);var t=Math.max,i=function(...e){return e.filter(Boolean).join(" ")},o=function(n,r){return e.cloneElement(n,{className:i(n.props.className,r)})},u={previous:function(e,n){return Object.assign({},e,{previous:n})},leaving:function(e,n,r,t){return e.leaving.set(n,{child:r,index:t}),e.evolution++,e},left:function(e,n){return e.leaving.delete(n),e.evolution++,e},entering:function(e,n,r){return r?e.entering.set(n,r):e.entering.delete(n),e.evolution++,e}},a=function(e,n){var r=n[0],t=n.slice(1);return u[r](e,...t)},c=function(e,n){var r;return Object.assign({},e,((r={})[n.key]=n,r))},v=function(n,r){var i,o,u,a=e.Children.toArray(r),c=[],v=a.map((function(e){return e.key})),l=a.length,f=0,s=[...n.values()].reduce((function(e,n){var r,i=n.child,o=n.index;if(v.includes(i.key))return e;var u=function(e,n){for(var r=-1,t=1;r<0;)r=e[n]?e[n+t++]?r:n+t:n;return r}(e,o+f);return l=t(u,l),f=u-o,Object.assign({},e,((r={})[u]=i,r))}),{});return function(e,n){for(var r=-1;++r<=e;)n(r)}(l,(i=c,o=s,u=a,function(e){o[e]&&i.push(o[e]),u[e]&&i.push(u[e])})),c},l=function(n,r){return e.useCallback((function(...e){return r([n,...e])}),[])},f=function(n,r){return function(t,i){var o=i.duration;void 0===o&&(o=500);var u=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(r[t]=e[t]);return r}(i,["duration"]),c=e.useReducer(a,{evolution:0,previous:t,entering:new Map,leaving:new Map}),f=c[0],s=f.previous,d=f.entering,p=f.leaving,g=f.evolution,h=c[1],y=l("previous",h),m=l("entering",h),O=l("leaving",h),k=l("left",h);return t!==s&&(n({previous:s,children:t,setLeaving:O,setLeft:k,setEntering:m,duration:o}),y(t)),e.useMemo((function(e){return r({leaving:p,entering:d,children:v(p,t),options:u})}),[g,t])}};var s=f((function(n){var r=n.previous,t=n.children,i=n.setLeaving,o=n.setLeft,u=n.duration,a=e.Children.toArray(t).reduce(c,{});e.Children.toArray(r).forEach((function(e,n){a[e.key]||(i(e.key,e,n),setTimeout((function(){return o(e.key)}),u))}))}),(function(n){var r=n.leaving,t=n.children,i=n.options,u=i.reverse;void 0===u&&(u=!1);var a=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(r[t]=e[t]);return r}(i,["reverse"]);return e.Children.map(t,(function(e){var n=(r.get(e.key)?"exiting":"entering")+(u?"_reverse":"");return o(e,a[n]||n)}))}));var d=Object.values,p=f((function(n){var r=n.previous,t=n.children,i=n.setLeaving,o=n.setLeft,u=n.setEntering,a=n.duration,v=e.Children.toArray(t).reduce(c,{});e.Children.toArray(r).forEach((function(e,n){v[e.key]?delete v[e.key]:(i(e.key,e,n),setTimeout((function(){return o(e.key)}),a))})),d(v).forEach((function(e){var n=e.key;u(n,!0),setTimeout((function(){return u(n)}),1)}))}),(function(n){var r=n.leaving,t=n.entering,i=n.children,u=n.options,a=u.reverse;void 0===a&&(a=!1);var c=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(r[t]=e[t]);return r}(u,["reverse"]);return e.Children.map(i,(function(e){var n=["before_enter","after_exit"],i=r.get(e.key)?n.reverse()[+a]:t.get(e.key)?n[+a]:"entered";return o(e,c[i]||i)}))}));function g(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(r[t]=e[t]);return r}exports.Animated=function(e){var n=e.As;void 0===n&&(n=r.default.Fragment);var t=e.children,i=g(e,["As","children"]);return r.default.createElement(n,null,s(t,i))},exports.Transitioned=function(e){var n=e.As;void 0===n&&(n=r.default.Fragment);var t=e.children,i=g(e,["As","children"]);return r.default.createElement(n,null,p(t,i))},exports.useAnimated=s,exports.useTransitioned=p;
