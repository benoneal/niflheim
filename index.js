function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React);function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++)if(t%2){var r=null!=arguments[t]?arguments[t]:{};ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):ownKeys(r).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(arguments[t],r))});return e}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}var values=Object.values,max=Math.max,clone=function(e,t){return React.cloneElement(e,{className:cx(e.props.className,t)})},cx=function(){for(var e=arguments,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=e[n];return r.filter(Boolean).join(" ")},transitionHandlers={previous:function(e,t){return _objectSpread2({},e,{previous:t})},leaving:function(e,t,r,n){var i=e.leaving;return _objectSpread2({},_objectWithoutProperties(e,["leaving"]),{leaving:_objectSpread2({},i,_defineProperty({},t,{child:r,index:n}))})},left:function(e,t){var r=e.leaving,n=_objectWithoutProperties(e,["leaving"]);r[t];return _objectSpread2({},n,{leaving:_objectWithoutProperties(r,[t].map(_toPropertyKey))})},entering:function(e,t,r){var n=e.entering,i=_objectWithoutProperties(e,["entering"]);if(r)return _objectSpread2({},i,{entering:_objectSpread2({},n,_defineProperty({},t,r))});n[t];return _objectSpread2({},i,{entering:_objectWithoutProperties(n,[t].map(_toPropertyKey))})}},reducer=function(e,t){var r=_toArray(t),n=r[0],i=r.slice(1);return transitionHandlers[n].apply(transitionHandlers,[e].concat(_toConsumableArray(i)))},nextReducer=function(e,t){return _objectSpread2({},e,_defineProperty({},t.key,t))},iter=function(e,t){for(var r=-1;++r<=e;)t(r)},zip=function(e,t,r){return function(n){t[n]&&e.push(t[n]),r[n]&&e.push(r[n])}},nextFreeIndex=function(e,t){for(var r=-1,n=1;r<0;)r=e[t]?e[t+n++]?r:t+n:t;return r},zipLeaving=function(e,t){var r=React.Children.toArray(t),n=[],i=r.map(function(e){return e.key}),o=r.length,a=0,u=values(e).reduce(function(e,t){var r=t.child,n=t.index;if(i.includes(r.key))return e;var u=nextFreeIndex(e,n+a);return o=max(u,o),a=u-n,_objectSpread2({},e,_defineProperty({},u,r))},{});return iter(o,zip(n,u,r)),n},createSetter=function(e,t){return React.useCallback(function(){for(var r=arguments,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=r[o];return t([e].concat(i))},[])},createTransitionHook=function(e,t){return function(r,n){var i=n.duration,o=void 0===i?500:i,a=_objectWithoutProperties(n,["duration"]),u=_slicedToArray(React.useReducer(reducer,{previous:r,entering:{},leaving:{}}),2),c=u[0],l=c.previous,s=c.entering,f=c.leaving,p=u[1],d=createSetter("previous",p),y=createSetter("entering",p),v=createSetter("leaving",p),b=createSetter("left",p);return r!==l&&(e({previous:l,children:r,setLeaving:v,setLeft:b,setEntering:y,duration:o}),d(r)),React.useMemo(function(e){return t({leaving:f,entering:s,children:zipLeaving(f,r),options:a})},[s,f,r])}},transitionState=function(e){var t=e.previous,r=e.children,n=e.setLeaving,i=e.setLeft,o=e.duration,a=React.Children.toArray(r).reduce(nextReducer,{});React.Children.toArray(t).forEach(function(e,t){a[e.key]||(n(e.key,e,t),setTimeout(function(){return i(e.key)},o))})},applyClasses=function(e){var t=e.leaving,r=e.children,n=e.options,i=n.reverse,o=void 0!==i&&i,a=_objectWithoutProperties(n,["reverse"]);return React.Children.map(r,function(e){var r="".concat(t[e.key]?"exiting":"entering").concat(o?"_reverse":"");return clone(e,a[r]||r)})},useAnimated=createTransitionHook(transitionState,applyClasses),values$1=Object.values,transitionState$1=function(e){var t=e.previous,r=e.children,n=e.setLeaving,i=e.setLeft,o=e.setEntering,a=e.duration,u=React.Children.toArray(r).reduce(nextReducer,{});React.Children.toArray(t).forEach(function(e,t){u[e.key]?delete u[e.key]:(n(e.key,e,t),setTimeout(function(){return i(e.key)},a))}),values$1(u).forEach(function(e){var t=e.key;o(t,!0),setTimeout(function(){return o(t)},1)})},applyClasses$1=function(e){var t=e.leaving,r=e.entering,n=e.children,i=e.options,o=i.reverse,a=void 0!==o&&o,u=_objectWithoutProperties(i,["reverse"]);return React.Children.map(n,function(e){var n=["before_enter","after_exit"],i=t[e.key]?n.reverse()[+a]:r[e.key]?n[+a]:"entered";return clone(e,u[i]||i)})},useTransitioned=createTransitionHook(transitionState$1,applyClasses$1),Animated=function(e){var t=e.As,r=void 0===t?React__default.Fragment:t,n=e.children,i=_objectWithoutProperties(e,["As","children"]);return React__default.createElement(r,null,useAnimated(n,i))},Transitioned=function(e){var t=e.As,r=void 0===t?React__default.Fragment:t,n=e.children,i=_objectWithoutProperties(e,["As","children"]);return React__default.createElement(r,null,useTransitioned(n,i))};exports.Animated=Animated,exports.Transitioned=Transitioned,exports.useAnimated=useAnimated,exports.useTransitioned=useTransitioned;
